syntax = "proto3";

package decomx.pantheon;

message User {
    message Contact {
        string phone = 1;
        string email = 2;
        string facebook = 3;
        string wechat = 4;
        string twitter = 5;
    }
    bytes ethereumAddress = 1;
    string name = 2;
    string introduction = 3;
    Contact contacts = 4;
}

message TaskDetails {
    string description = 1;
    string proofOfWork = 2;
    uint64 ownerDeposit = 3;
    uint64 workerDeposit = 4;
    uint64 ownerPay = 5;
    uint64 workerPay = 6;
}

message TaskOp {
    enum OpType {
        CREATE = 0;
        ACCEPT = 1;
        REQUEST_TASK_DETAILS_CHANGE = 2;
        REQUEST_FINAL_REVIEW = 3;
        RECALL = 4;
        APPROVE = 5;
        REJECT = 6;
        CLAIM = 7;
        QUIT = 8;
    }
    OpType type = 1;
    uint32 index = 2;
    uint64 deadline = 3;
    string comments = 4;
    TaskDetails override = 5;
}

message Task {
    enum TaskStatus {
        DRAFT = 0;
        PENDING_ACCEPT = 1;
        PENDING_WORKER_PROOF = 2;
        PENDING_WORKER_CHANGE_REVIEW = 3;
        PENDING_OWNER_CHANGE_REVIEW = 4;
        PENDING_OWNER_FINAL_REVIEW = 5;
        CLOSED = 6;
        CANCELLED = 7;
    }
    TaskDetails content = 1;
    TaskStatus status = 2;
    User owner = 3;
    User worker = 4;
    repeated TaskOp ops = 5;
}
